<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>WEB-PORGRAMOZÁS 1 BEADANDÓ</title>
</head>
<body>
    <header>
        <h1>Web-programozás-1 Előadás Házi feladat</h1>
    </header>
    <nav>
        <ul>
            <li><a href="index.html">Kezdőlap</a></li>
            <li><a href="tablazat.html">Táblázat</a></li>
            <li><a href="html5.html" class="active">HTML5</a></li>
            <li><a href="chartjs.html">ChartJS</a></li>
            <li><a href="ajax.html">AJAX</a></li>
            <li><a href="oojs.html">OOJS</a></li>
        </ul>
    </nav>

    <aside>
        <h2 style="text-align: center;">Server-Sent Events</h2>
    </aside>

    <div id="content">
        <p></p>
        <button id="lekerdezes">Óra lekérdezése a szerverről</button>
        <div id="eredmeny"></div>
        <script>
            let forras = null;

            document.getElementById("lekerdezes").addEventListener('click', function(){
            if(forras !== null){
                forras.close();
                forras = null;
            }

            if(typeof(EventSource) !== "undefined"){
                forras = new EventSource("sse.php");
                forras.onmessage = function(event){
                    document.getElementById("eredmeny").innerHTML += event.data + "<br>";
                forras.close();
                forras = null;
                };
            }
            else{
                document.getElementById("eredmeny").innerHTML = "Hiba! Nem támogatja a böngésződ a Server-Sent Events-et.";
            };
        })
            /*document.getElementById('csatlakozas').addEventListener('click', function(){
            const webSocket = new WebSocket('https://echo.websocket.org');
            const webSocket = new WebSocket('https://sse.dev/test/');

            webSocket.onopen = function(){
                console.log('sikeres kapcsolodas');
            };

            webSocket.onerror = function(error){
                console.log('hiba tortent a kapcsolodas kozben: ', error);
            };

            webSocket.onmessage = function(stream){
                console.log('kapott uzenet: ', stream);
            };})*/
        </script>
    </div>

    <footer>
        <p>Készítette: Magyar Zoltán (TYDUNU), Molnár Márk (W8C9XJ)</p>
    </footer>
</body>
</html>